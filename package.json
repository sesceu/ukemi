{
  "name": "ukemi",
  "displayName": "ukemi",
  "publisher": "sbarfurth",
  "description": "VSCode extension for the Jujutsu (jj) version control system",
  "icon": "images/logo.png",
  "version": "0.0.11",
  "engines": {
    "vscode": "^1.96.0",
    "node": ">=22.17.0"
  },
  "categories": [
    "SCM Providers"
  ],
  "repository": {
    "type": "git",
    "url": "https://github.com/sbarfurth/ukemi.git"
  },
  "activationEvents": [
    "*",
    "onEditSession:file"
  ],
  "main": "./dist/main.js",
  "contributes": {
    "views": {
      "scm": [
        {
          "type": "webview",
          "id": "jjGraphWebview",
          "name": "Source Control Graph (JJ)",
          "when": "jj.reposExist"
        },
        {
          "id": "jjGraph",
          "name": "Commits (JJ)",
          "when": "jj.reposExist"
        },
        {
          "id": "jjOperationLog",
          "name": "Operation Log (JJ)",
          "when": "jj.reposExist"
        }
      ]
    },
    "commands": [
      {
        "command": "jj.refresh",
        "title": "Refresh",
        "category": "Jujutsu",
        "icon": "$(refresh)",
        "enablement": "!operationInProgress"
      },
      {
        "command": "jj.openFileResourceDiff",
        "title": "Open diff",
        "category": "Jujutsu",
        "icon": "$(compare-changes)"
      },
      {
        "command": "jj.openFileEditor",
        "title": "Open file",
        "category": "Jujutsu",
        "icon": "$(go-to-file)"
      },
      {
        "command": "jj.openDiffEditor",
        "title": "Open diff",
        "category": "Jujutsu",
        "icon": "$(compare-changes)"
      },
      {
        "command": "jj.describe",
        "title": "Update change description",
        "category": "Jujutsu",
        "icon": "$(edit)"
      },
      {
        "command": "jj.new",
        "title": "Create new change",
        "category": "Jujutsu",
        "icon": "$(plus)"
      },
      {
        "command": "jj.squashToParentResourceGroup",
        "title": "Move changes to parent",
        "category": "Jujutsu",
        "icon": "$(arrow-down)"
      },
      {
        "command": "jj.squashToWorkingCopyResourceGroup",
        "title": "Move changes to working copy",
        "category": "Jujutsu",
        "icon": "$(arrow-up)"
      },
      {
        "command": "jj.squashToParentResourceState",
        "title": "Move changes to parent",
        "category": "Jujutsu",
        "icon": "$(arrow-down)"
      },
      {
        "command": "jj.squashToWorkingCopyResourceState",
        "title": "Move changes to working copy",
        "category": "Jujutsu",
        "icon": "$(arrow-up)"
      },
      {
        "command": "jj.editResourceGroup",
        "title": "Edit this change",
        "category": "Jujutsu",
        "icon": "$(sign-in)"
      },
      {
        "command": "jj.restoreResourceState",
        "title": "Discard changes",
        "category": "Jujutsu",
        "icon": "$(discard)"
      },
      {
        "command": "jj.restoreResourceGroup",
        "title": "Discard changes",
        "category": "Jujutsu",
        "icon": "$(discard)"
      },
      {
        "command": "jj.gitFetch",
        "title": "Fetch from remote",
        "category": "Jujutsu"
      },
      {
        "command": "jj.refreshOperationLog",
        "title": "Refresh operation log",
        "category": "Jujutsu",
        "icon": "$(refresh)"
      },
      {
        "command": "jj.selectOperationLogRepo",
        "title": "Select repository",
        "category": "Jujutsu",
        "icon": "$(repo)"
      },
      {
        "command": "jj.operationUndo",
        "title": "Undo operation",
        "category": "Jujutsu",
        "icon": "$(discard)"
      },
      {
        "command": "jj.operationRestore",
        "title": "Restore repo to the state at this operation",
        "category": "Jujutsu",
        "icon": "$(history)"
      },
      {
        "command": "jj.refreshGraphWebview",
        "title": "Refresh source control graph",
        "category": "Jujutsu",
        "icon": "$(refresh)"
      },
      {
        "command": "jj.newGraphWebview",
        "title": "Create new change with selected as parents",
        "category": "Jujutsu",
        "icon": "$(plus)"
      },
      {
        "command": "jj.selectGraphWebviewRepo",
        "title": "Select repository",
        "category": "Jujutsu",
        "icon": "$(repo)"
      },
      {
        "command": "jj.placeholderForFolders",
        "title": "â€‹",
        "category": "Jujutsu",
        "enablement": "false"
      },
      {
        "command": "jj.squashSelectedRanges",
        "title": "Squash selected changes...",
        "category": "Jujutsu"
      },
      {
        "command": "jj.openParentChange",
        "title": "Open parent change",
        "category": "Jujutsu",
        "icon": "$(arrow-left)"
      },
      {
        "command": "jj.openChildChange",
        "title": "Open child change",
        "category": "Jujutsu",
        "icon": "$(arrow-right)"
      },
      {
        "command": "jj.copyFullChangeId",
        "title": "Copy Full Change ID",
        "category": "Jujutsu"
      },
      {
        "command": "jj.copyShortChangeId",
        "title": "Copy Short Change ID",
        "category": "Jujutsu"
      },
      {
        "command": "jj.copyDescription",
        "title": "Copy Description",
        "category": "Jujutsu"
      },
      {
        "command": "jj.update",
        "title": "Update",
        "category": "Jujutsu"
      },
      {
        "command": "jj.abandon",
        "title": "Abandon",
        "category": "Jujutsu",
        "icon": "$(trash)"
      },
      {
        "command": "jj.commit",
        "title": "Commit changes",
        "category": "Jujutsu"
      },
      {
        "command": "ukemi.refreshComments",
        "title": "Refresh GitHub Comments",
        "category": "Jujutsu",
        "icon": "$(refresh)"
      },
      {
        "command": "ukemi.replyAndResolve",
        "title": "Reply & Resolve",
        "category": "Jujutsu",
        "icon": "$(check)"
      },
      {
        "command": "ukemi.replyOnly",
        "title": "Reply Only",
        "category": "Jujutsu",
        "icon": "$(reply)"
      },
      {
        "command": "ukemi.markDone",
        "title": "Mark Done",
        "category": "Jujutsu",
        "icon": "$(pass)"
      }
    ],
    "menus": {
      "comments/commentThread/title": [
        {
          "command": "ukemi.markDone",
          "group": "navigation",
          "when": "commentController == ukemi-comments"
        }
      ],
      "comments/commentThread/context": [
        {
          "command": "ukemi.replyAndResolve",
          "group": "navigation@1",
          "when": "commentController == ukemi-comments"
        },
        {
          "command": "ukemi.markDone",
          "group": "navigation@2",
          "when": "commentController == ukemi-comments"
        },
        {
          "command": "ukemi.replyOnly",
          "group": "navigation@3",
          "when": "commentController == ukemi-comments"
        }
      ],
      "editor/title": [
        {
          "command": "jj.squashSelectedRanges",
          "when": "jj.reposExist && editorTextFocus && editorHasSelection && !editorReadonly"
        },
        {
          "command": "jj.openFileEditor",
          "when": "jj.reposExist && isInDiffEditor",
          "group": "navigation"
        },
        {
          "command": "jj.openDiffEditor",
          "when": "jj.reposExist && !isInDiffEditor",
          "group": "navigation@1"
        },
        {
          "command": "jj.openParentChange",
          "when": "jj.reposExist",
          "group": "navigation@2"
        },
        {
          "command": "jj.openChildChange",
          "when": "jj.reposExist",
          "group": "navigation@3"
        }
      ],
      "editor/context": [
        {
          "command": "jj.squashSelectedRanges",
          "when": "jj.reposExist && editorTextFocus && editorHasSelection && !editorReadonly"
        }
      ],
      "view/title": [
        {
          "command": "jj.refreshOperationLog",
          "when": "view == jjOperationLog",
          "group": "navigation"
        },
        {
          "command": "jj.selectOperationLogRepo",
          "when": "view == jjOperationLog",
          "group": "navigation"
        },
        {
          "command": "jj.refreshGraphWebview",
          "when": "view == jjGraphWebview",
          "group": "navigation"
        },
        {
          "command": "jj.newGraphWebview",
          "when": "view == jjGraphWebview && jjGraphView.nodesSelected",
          "group": "navigation"
        },
        {
          "command": "ukemi.refreshComments",
          "when": "view == workbench.panel.comments",
          "group": "navigation"
        },
        {
          "command": "jj.selectGraphWebviewRepo",
          "when": "view == jjGraphWebview",
          "group": "navigation"
        }
      ],
      "view/item/context": [
        {
          "command": "jj.operationUndo",
          "when": "view == jjOperationLog",
          "group": "inline"
        },
        {
          "command": "jj.operationRestore",
          "when": "view == jjOperationLog",
          "group": "inline"
        },
        {
          "command": "jj.copyFullChangeId",
          "when": "view == jjGraph",
          "group": "1_item_copy@1"
        },
        {
          "command": "jj.copyShortChangeId",
          "when": "view == jjGraph",
          "group": "1_item_copy@2"
        },
        {
          "command": "jj.copyDescription",
          "when": "view == jjGraph",
          "group": "1_item_copy@3"
        },
        {
          "command": "jj.update",
          "when": "view == jjGraph",
          "group": "2_item_action@1"
        },
        {
          "command": "jj.abandon",
          "when": "view == jjGraph && viewItem == mutable",
          "group": "2_item_action@2"
        },
        {
          "command": "jj.abandon",
          "when": "view == jjGraph && viewItem == mutable",
          "group": "inline"
        }
      ],
      "scm/title": [
        {
          "command": "jj.refresh",
          "when": "scmProvider == jj",
          "group": "navigation"
        },
        {
          "command": "jj.new",
          "when": "scmProvider == jj",
          "group": "navigation"
        }
      ],
      "scm/resourceGroup/context": [
        {
          "command": "jj.describe",
          "when": "scmProvider == jj",
          "group": "inline"
        },
        {
          "command": "jj.squashToParentResourceGroup",
          "when": "scmProvider == jj && scmResourceGroup == @",
          "group": "inline"
        },
        {
          "command": "jj.squashToWorkingCopyResourceGroup",
          "when": "scmProvider == jj && scmResourceGroup != @",
          "group": "inline"
        },
        {
          "command": "jj.restoreResourceGroup",
          "when": "scmProvider == jj",
          "group": "inline"
        },
        {
          "command": "jj.editResourceGroup",
          "when": "scmProvider == jj && scmResourceGroup != @",
          "group": "inline"
        }
      ],
      "scm/resourceState/context": [
        {
          "command": "jj.openFileResourceDiff",
          "when": "scmProvider == jj",
          "group": "inline"
        },
        {
          "command": "jj.restoreResourceState",
          "when": "scmProvider == jj",
          "group": "inline"
        },
        {
          "command": "jj.squashToParentResourceState",
          "when": "scmProvider == jj && scmResourceGroup == @",
          "group": "inline"
        },
        {
          "command": "jj.squashToWorkingCopyResourceState",
          "when": "scmProvider == jj && scmResourceGroup != @",
          "group": "inline"
        }
      ],
      "scm/resourceFolder/context": [
        {
          "command": "jj.restoreResourceState",
          "when": "scmProvider == jj",
          "group": "inline"
        },
        {
          "command": "jj.squashToParentResourceState",
          "when": "scmProvider == jj && scmResourceGroup == @",
          "group": "inline"
        },
        {
          "command": "jj.squashToWorkingCopyResourceState",
          "when": "scmProvider == jj && scmResourceGroup != @",
          "group": "inline"
        }
      ],
      "commandPalette": [
        {
          "command": "jj.openFileResourceDiff",
          "when": "false"
        },
        {
          "command": "jj.openFileEditor",
          "when": "false"
        },
        {
          "command": "jj.openDiffEditor",
          "when": "false"
        },
        {
          "command": "jj.describe",
          "when": "false"
        },
        {
          "command": "jj.squashToParentResourceGroup",
          "when": "false"
        },
        {
          "command": "jj.squashToWorkingCopyResourceGroup",
          "when": "false"
        },
        {
          "command": "jj.squashToParentResourceState",
          "when": "false"
        },
        {
          "command": "jj.squashToWorkingCopyResourceState",
          "when": "false"
        },
        {
          "command": "jj.editResourceGroup",
          "when": "false"
        },
        {
          "command": "jj.restoreResourceState",
          "when": "false"
        },
        {
          "command": "jj.restoreResourceGroup",
          "when": "false"
        },
        {
          "command": "jj.selectOperationLogRepo",
          "when": "false"
        },
        {
          "command": "jj.operationUndo",
          "when": "false"
        },
        {
          "command": "jj.operationRestore",
          "when": "false"
        },
        {
          "command": "jj.selectGraphWebviewRepo",
          "when": "false"
        },
        {
          "command": "jj.placeholderForFolders",
          "when": "false"
        },
        {
          "command": "jj.openParentChange",
          "when": "false"
        },
        {
          "command": "jj.openChildChange",
          "when": "false"
        }
      ]
    },
    "configuration": {
      "title": "ukemi",
      "properties": {
        "ukemi.enableAnnotations": {
          "type": "boolean",
          "default": true,
          "description": "Enables in-line blame annotations",
          "scope": "resource"
        },
        "ukemi.commandTimeout": {
          "type": [
            "number",
            "null"
          ],
          "default": null,
          "description": "Global timeout in milliseconds for all jj commands. If not set, per-command defaults will be used.",
          "scope": "resource",
          "minimum": 1000
        },
        "ukemi.jjPath": {
          "type": "string",
          "default": "",
          "description": "Path to the jj executable. If not set, your PATH and common locations will be searched for a jj executable.",
          "scope": "resource"
        },
        "ukemi.githubToken": {
          "type": "string",
          "default": "",
          "description": "GitHub Personal Access Token (PAT) for fetching PR comments. If not set, the gh CLI's default authentication will be used.",
          "scope": "resource"
        },
        "ukemi.githubTokens": {
          "type": "object",
          "default": {},
          "description": "A map of GitHub organization names to Personal Access Tokens (PATs). Useful for working across multiple organizations with different auth requirements. PAT tokens need read/write access to Pull requests and Contents.",
          "scope": "resource"
        },
        "ukemi.ghPath": {
          "type": "string",
          "default": "",
          "description": "Path to the gh executable. If not set, your PATH will be searched for a gh executable.",
          "scope": "resource"
        },
        "ukemi.githubRemote": {
          "type": "string",
          "default": "origin",
          "description": "The git remote name to use for identifying the GitHub organization and repository.",
          "scope": "resource"
        },
        "ukemi.githubPRSearchLimit": {
          "type": "number",
          "default": 10,
          "description": "The maximum number of parent commits to search for a matching GitHub PR.",
          "scope": "resource",
          "minimum": 0
        },
        "ukemi.githubPRPollInterval": {
          "type": "number",
          "default": 5,
          "description": "Interval in minutes for background polling of GitHub PR comments. Set to 0 to disable background polling.",
          "scope": "resource",
          "minimum": 0
        },
        "ukemi.graph.viewLayout": {
          "type": "string",
          "enum": [
            "floating",
            "compact"
          ],
          "default": "floating",
          "description": "Layout style for the graph rows. 'floating' allows wrapping, 'compact' forces a single line.",
          "scope": "resource"
        },
        "ukemi.graph.showCommitId": {
          "type": "boolean",
          "default": true,
          "markdownDescription": "Whether to show the commit ID in the graph.",
          "scope": "resource"
        },
        "ukemi.graph.showAuthor": {
          "type": "boolean",
          "default": true,
          "markdownDescription": "Whether to show the author in the graph (Floating view only).",
          "scope": "resource"
        },
        "ukemi.graph.showBookmarks": {
          "type": "boolean",
          "default": true,
          "markdownDescription": "Whether to show the bookmarks in the graph.",
          "scope": "resource"
        },
        "ukemi.graph.showTimestamp": {
          "type": "string",
          "enum": [
            "always",
            "immutable_only",
            "never"
          ],
          "enumItemLabels": [
            "Always",
            "Immutable only",
            "Never"
          ],
          "markdownEnumDescriptions": [
            "Show the timestamp on every commit",
            "Show timestamp only on immutable revisions (e.g. trunk)",
            "Never show timestamp"
          ],
          "default": "always",
          "markdownDescription": "Controls the visibility of the timestamp in the graph.",
          "scope": "resource"
        },
        "ukemi.graph.useConfigLogRevset": {
          "type": "boolean",
          "default": false,
          "markdownDescription": "Whether to use the [default revset](https://docs.jj-vcs.dev/latest/config/#default-revisions) for `jj log` from the `revsets.log` configuration option.\n\nIf true, the `#ukemi.graph.revset#` setting is ignored.",
          "scope": "resource"
        },
        "ukemi.graph.revset": {
          "type": "string",
          "default": "::",
          "markdownDescription": "The [revset](https://docs.jj-vcs.dev/latest/revsets/) to use for graphing. Defaults to all changes (`::`).\n\nIgnored if `#ukemi.graph.useConfigLogRevset#` is `true`.",
          "scope": "resource"
        },
        "ukemi.graph.limit": {
          "type": "number",
          "default": 50,
          "markdownDescription": "Maximum number of commits to show in the graph.",
          "scope": "resource"
        }
      }
    },
    "configurationDefaults": {
      "files.exclude": {
        "**/.jj": true
      }
    },
    "colors": [
      {
        "id": "jjDecoration.addedResourceForeground",
        "description": "%colors.added%",
        "defaults": {
          "light": "#587c0c",
          "dark": "#81b88b",
          "highContrast": "#a1e3ad",
          "highContrastLight": "#374e06"
        }
      },
      {
        "id": "jjDecoration.modifiedResourceForeground",
        "description": "%colors.modified%",
        "defaults": {
          "light": "#895503",
          "dark": "#E2C08D",
          "highContrast": "#E2C08D",
          "highContrastLight": "#895503"
        }
      },
      {
        "id": "jjDecoration.deletedResourceForeground",
        "description": "%colors.deleted%",
        "defaults": {
          "light": "#ad0707",
          "dark": "#c74e39",
          "highContrast": "#c74e39",
          "highContrastLight": "#ad0707"
        }
      },
      {
        "id": "jjDecoration.renamedResourceForeground",
        "description": "%colors.renamed%",
        "defaults": {
          "light": "#007100",
          "dark": "#73C991",
          "highContrast": "#73C991",
          "highContrastLight": "#007100"
        }
      },
      {
        "id": "jjDecoration.untrackedResourceForeground",
        "description": "%colors.untracked%",
        "defaults": {
          "light": "#007100",
          "dark": "#73C991",
          "highContrast": "#73C991",
          "highContrastLight": "#007100"
        }
      },
      {
        "id": "jjDecoration.ignoredResourceForeground",
        "description": "%colors.ignored%",
        "defaults": {
          "light": "#8E8E90",
          "dark": "#8C8C8C",
          "highContrast": "#A7A8A9",
          "highContrastLight": "#8e8e90"
        }
      },
      {
        "id": "jjDecoration.stageModifiedResourceForeground",
        "description": "%colors.stageModified%",
        "defaults": {
          "light": "#895503",
          "dark": "#E2C08D",
          "highContrast": "#E2C08D",
          "highContrastLight": "#895503"
        }
      },
      {
        "id": "jjDecoration.stageDeletedResourceForeground",
        "description": "%colors.stageDeleted%",
        "defaults": {
          "light": "#ad0707",
          "dark": "#c74e39",
          "highContrast": "#c74e39",
          "highContrastLight": "#ad0707"
        }
      },
      {
        "id": "jjDecoration.conflictingResourceForeground",
        "description": "%colors.conflict%",
        "defaults": {
          "light": "#ad0707",
          "dark": "#e4676b",
          "highContrast": "#c74e39",
          "highContrastLight": "#ad0707"
        }
      },
      {
        "id": "jjDecoration.submoduleResourceForeground",
        "description": "%colors.submodule%",
        "defaults": {
          "light": "#1258a7",
          "dark": "#8db9e2",
          "highContrast": "#8db9e2",
          "highContrastLight": "#1258a7"
        }
      },
      {
        "id": "jj.blame.editorDecorationForeground",
        "description": "%colors.blameEditorDecoration%",
        "defaults": {
          "dark": "editorCodeLens.foreground",
          "light": "editorCodeLens.foreground",
          "highContrast": "editorCodeLens.foreground",
          "highContrastLight": "editorCodeLens.foreground"
        }
      }
    ],
    "languages": [
      {
        "id": "jj-commit",
        "aliases": [
          "JJ Commit Message",
          "jj-commit"
        ],
        "extensions": [
          ".jjdescription"
        ],
        "configuration": "./languages/jj-commit.language-configuration.json"
      }
    ],
    "grammars": [
      {
        "language": "jj-commit",
        "scopeName": "text.jj-commit",
        "path": "./syntaxes/jj-commit.tmLanguage.json"
      }
    ]
  },
  "scripts": {
    "build": "npm run check-types && npm run lint && node esbuild.js --production && cp -r src/webview dist/ && cp src/config.toml dist/ && mkdir -p dist/codicons && cp -r node_modules/@vscode/codicons/dist/* dist/codicons/ && npm run build:fakeeditor && mkdir -p dist/fakeeditor/zig-out/bin && cp -r src/fakeeditor/zig-out/bin/. dist/fakeeditor/zig-out/bin/",
    "build:fakeeditor": "cd src/fakeeditor && ./build_all_platforms.sh",
    "vscode:prepublish": "npm run build",
    "compile": "npm run check-types && npm run lint && node esbuild.js",
    "watch": "npm-run-all -p watch:*",
    "watch:esbuild": "node esbuild.js --watch",
    "watch:tsc": "tsc --noEmit --watch --project tsconfig.json",
    "compile-tests": "node esbuild.js --test",
    "pretest": "npm run compile-tests && npm run compile",
    "check-types": "tsc --noEmit",
    "lint": "eslint src",
    "test": "node out/test/runTest.js"
  },
  "devDependencies": {
    "@types/cross-spawn": "^6.0.6",
    "@types/mocha": "^10.0.10",
    "@types/node": "^22.13.0",
    "@types/vscode": "^1.96.0",
    "@types/which": "^3.0.4",
    "@vscode/test-cli": "^0.0.12",
    "@vscode/test-electron": "^2.5.2",
    "esbuild": "^0.27.2",
    "eslint": "^9.39.2",
    "globals": "^17.0.0",
    "npm-run-all": "^4.1.5",
    "prettier": "3.8.0",
    "typescript": "^5.9.3",
    "typescript-eslint": "^8.53.1"
  },
  "dependencies": {
    "@vscode/codicons": "^0.0.44",
    "ansi-regex": "^6.2.2",
    "arktype": "^2.1.29",
    "cross-spawn": "^7.0.6",
    "which": "^6.0.0"
  }
}
